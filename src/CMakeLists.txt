set(EXECUTABLE_OUTPUT_PATH "${PROJECT_BINARY_DIR}/bin")
set(exec_sources cepgen.cc)
if(CMAKE_BUILD_SCAN)
  list(APPEND exec_sources cepgenScan.cc)
endif()
message(STATUS "Executables will be linked against ${CEPGEN_LIBRARIES}")
foreach(exec_src ${exec_sources})
  get_filename_component(exec_bin ${exec_src} NAME_WE)
  add_executable(${exec_bin} ${exec_src})
  target_link_libraries(${exec_bin} ${CEPGEN_LIBRARIES})
  install(TARGETS ${exec_bin} DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT lib)
endforeach()

add_subdirectory(utils)

add_test(NAME cepgen_list COMMAND cepgen -l)
set_property(TEST cepgen_list PROPERTY ENVIRONMENT "CEPGEN_PATH=${PROJECT_BINARY_DIR}")
add_test(NAME cepgen_lpair COMMAND cepgen -i Cards/lpair_cfg.py -n 5000 -d)
set_property(TEST cepgen_lpair PROPERTY ENVIRONMENT "CEPGEN_PATH=${PROJECT_BINARY_DIR};PYTHONPATH=${PROJECT_BINARY_DIR}")
