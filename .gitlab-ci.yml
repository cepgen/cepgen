stages:
  - compile
  - test

image: gitlab-registry.cern.ch/lforthom/custom_ci_worker:cc7

compile:
  stage: compile
  before_script:
    #- yum install -y -q gsl gsl-devel libgfortran gcc-gfortran
    - mkdir build
    - cd build
  script:
    - cmake ..
    - make -j 4

test:
  stage: test
  before_script:
    - cd build
  script:
    - make probe_physics_processes
    - test/probe_physics_processes
  when: on_success
  allow_failure: true
